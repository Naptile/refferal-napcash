<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NapCash – Dashboard</title>
<link rel="stylesheet" href="styles/dash2.css">
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
<style>
body { background:#000; color:#fff; margin:0; font-family: Arial, sans-serif; }
.nav { display:flex; align-items:center; justify-content:space-between; padding:15px 20px; background:#111; }
.brand { font-size:1.5rem; color:orange; font-weight:bold; }
.btn-orange { background:orange; border:none; color:black; font-weight:bold; padding:8px 12px; border-radius:6px; cursor:pointer; transition:0.3s; }
.btn-orange:disabled { background:gray; color:#ddd; cursor:not-allowed; }
.btn-orange:hover:enabled { background:#ff9900; color:#fff; }
.hero { max-width:1000px; margin:20px auto; padding:20px; }
.card { background:#111; padding:25px; border-radius:12px; }
.dashboard-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-top:20px; }
.info-card { background:#222; padding:20px; border-radius:10px; text-align:center; }
.info-card h3 { color:orange; margin-bottom:8px; }
input#refLink { width:100%; padding:5px; border:none; border-radius:5px; color:#000; margin-bottom:8px; }
.referral-list, .withdrawal-list { list-style:none; padding-left:0; margin-top:10px; }
.referral-list li, .withdrawal-list li { display:flex; justify-content:space-between; align-items:center; background:#222; padding:10px; border-radius:6px; margin-bottom:8px; }
.status-badge { font-size:0.8rem; padding:4px 8px; border-radius:4px; font-weight:bold; color:#fff; }
.active { background:green; }
.inactive { background:orange; }

/* Profile Modal */
#profileModal { 
  display:none; 
  position:fixed; 
  top:0; left:0; 
  width:100%; height:100%; 
  background:rgba(0,0,0,0.7); 
  justify-content:center; 
  align-items:flex-end; 
  z-index:1000; 
  transition: all 0.3s ease-in-out;
}
#profileModal.show { display:flex; }
#profileModal .modal-content { 
  background:#111; 
  padding:20px; 
  border-radius:15px 15px 0 0; 
  width:100%; 
  max-width:500px; 
  color:#fff; 
  transform:translateY(100%);
  animation: slideUp 0.3s forwards;
}
#profileModal h3 { margin-top:0; color:orange; text-align:center; }
#profileModal input { width:100%; margin-bottom:12px; padding:10px; border-radius:8px; border:none; font-size:1rem; }
#profileModal .modal-actions { display:flex; justify-content:flex-end; gap:10px; }

@keyframes slideUp {
  from { transform:translateY(100%); }
  to { transform:translateY(0); }
}

/* Desktop view - centered modal */
@media(min-width:768px){
  #profileModal { align-items:center; }
  #profileModal .modal-content { 
    border-radius:12px; 
    max-width:400px; 
    animation: fadeIn 0.3s forwards;
  }
}
@keyframes fadeIn {
  from { opacity:0; transform:scale(0.9); }
  to { opacity:1; transform:scale(1); }
}
</style>
</head>
<body>

<div class="nav">
  <div class="brand">NapCash</div>
  <div class="nav-links">
    <button id="profileBtn" class="btn-orange">Profile</button>
    <span id="userEmail"></span>
    <button id="logoutBtn" class="btn-orange">Logout</button>
  </div>
</div>

<div class="hero">
  <div class="card">
    <h2>Dashboard</h2>
    <div class="dashboard-grid">
      <div class="info-card">
        <h3>Status</h3>
        <p id="status">Loading...</p>
        <button id="activateBtn" class="btn-orange" style="margin-top:10px;">Activate</button>
      </div>
      <div class="info-card">
        <h3>Your Referral Code</h3>
        <p id="refCode">Loading...</p>
      </div>
      <div class="info-card">
        <h3>Your Earnings</h3>
        <p>KSh <span id="earnings">0</span></p>
        <button id="withdrawBtn" class="btn-orange" style="margin-top:10px;">Withdraw</button>
        <p id="withdrawStatus" style="margin-top:8px; font-size:0.9rem; color:orange;"></p>
      </div>
      <div class="info-card">
        <h3>Referral Link</h3>
        <input type="text" id="refLink" readonly>
        <button id="copyBtn" class="btn-orange">Copy Link</button>
      </div>
    </div>

    <div style="margin-top:20px;">
      <h3>People You Referred</h3>
      <ul id="referralsList" class="referral-list">
        <li>Loading...</li>
      </ul>
    </div>

    <div style="margin-top:20px;">
      <h3>Your Withdrawals</h3>
      <ul id="withdrawalsList" class="withdrawal-list">
        <li>Loading...</li>
      </ul>
    </div>
  </div>
</div>

<!-- Profile Modal -->
<div id="profileModal">
  <div class="modal-content">
    <h3>Edit Profile</h3>
    <input type="text" id="editFullName" placeholder="Full Name">
    <input type="email" id="editEmail" placeholder="Email">
    <input type="password" id="editPassword" placeholder="New Password">
    <div class="modal-actions">
      <button id="saveProfileBtn" class="btn-orange">Save</button>
      <button id="cancelProfileBtn" class="btn-orange">Cancel</button>
    </div>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDybgITS1zttYLSa1_vsV0vYLzqbr42abA",
  authDomain: "napcash-3e696.firebaseapp.com",
  projectId: "napcash-3e696",
  storageBucket: "napcash-3e696.firebasestorage.app",
  messagingSenderId: "720221815295",
  appId: "1:720221815295:web:e8b299b30909c6cc9927ca"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

const profileModal = document.getElementById("profileModal");
const profileBtn = document.getElementById("profileBtn");
const cancelProfileBtn = document.getElementById("cancelProfileBtn");

profileBtn.onclick = () => { profileModal.classList.add("show"); };
cancelProfileBtn.onclick = () => { profileModal.classList.remove("show"); };
window.onclick = e => { if(e.target===profileModal) profileModal.classList.remove("show"); };

// (All your other Firebase dashboard logic remains same as before…)
</script>
</body>
</html>

